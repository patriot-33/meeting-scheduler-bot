# üóìÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Google Calendar –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π

## üéØ –ü–†–û–ë–õ–ï–ú–ê –ò –†–ï–®–ï–ù–ò–ï

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ–∫—É—â–∏–π OAuth —Ç—Ä–µ–±—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
**–†–µ—à–µ–Ω–∏–µ:** 3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üìã –ú–ï–¢–û–î 1: –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Calendar ID (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —É —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–ü–æ–ª—É—á–∏—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –±–æ—Ç–∞**
   ```
   /calendar_simple
   ```
   –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç email –≤–∏–¥–∞: `bot-name@project-id.iam.gserviceaccount.com`

2. **–û—Ç–∫—Ä–æ–π—Ç–µ Google Calendar**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://calendar.google.com
   - –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏

3. **–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º —Å –±–æ—Ç–æ–º**
   - –ù–∞–∂–º–∏—Ç–µ 3 —Ç–æ—á–∫–∏ —Ä—è–¥–æ–º —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø"
   - –í —Ä–∞–∑–¥–µ–ª–µ "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º" –Ω–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å"
   - –í—Å—Ç–∞–≤—å—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: "–í–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
   - –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Calendar ID**
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è" (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `your.email@gmail.com`)

5. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ ID –±–æ—Ç—É**
   ```
   /setcalendar your.email@gmail.com
   ```

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫–∞–ª–µ–Ω–¥–∞—Ä—é
- –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–æ–∑–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- –ù–∏–∫–∞–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π –∏–ª–∏ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

---

## üìã –ú–ï–¢–û–î 2: Device Code Flow (–ë–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤)

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π OAuth –±–µ–∑ client_secret
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç webhook/redirect
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è Telegram –±–æ—Ç–æ–≤

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–ó–∞–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**
   ```
   /calendar_device
   ```

2. **–ë–æ—Ç –≤—ã–¥–∞—Å—Ç:**
   - –°—Å—ã–ª–∫—É: https://www.google.com/device
   - –ö–æ–¥: XXXX-XXXX

3. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É
   - –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥
   - –í–æ–π–¥–∏—Ç–µ –≤ Google –∞–∫–∫–∞—É–Ω—Ç
   - –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é

4. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –±–æ—Ç**
   - –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —É—Å–ø–µ—à–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```python
# –í oauth_public_service.py
device_data = public_oauth_service.generate_device_code_url(user_id)
# –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π polling –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
result = public_oauth_service.poll_device_code(user_id, device_code)
```

---

## üìã –ú–ï–¢–û–î 3: –ü—É–±–ª–∏—á–Ω—ã–π OAuth Client

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç client_secret
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π Client ID
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è open-source –ø—Ä–æ–µ–∫—Ç–æ–≤

### üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:

1. **Google Cloud Console:**
   - –°–æ–∑–¥–∞–π—Ç–µ OAuth 2.0 Client ID
   - –¢–∏–ø: "Web application" –∏–ª–∏ "TVs and Limited Input devices"
   - –î–æ–±–∞–≤—å—Ç–µ redirect URI

2. **–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   GOOGLE_OAUTH_CLIENT_ID=123456789-abc.apps.googleusercontent.com
   ```

3. **–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:**
   ```
   /calendar_oauth
   ```
   –ò –ø—Ä–æ–π—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

---

## ü§î –ö–ê–ö–û–ô –ú–ï–¢–û–î –í–´–ë–†–ê–¢–¨?

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:
**–ú–µ—Ç–æ–¥ 1 (Calendar ID)** - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
**–ú–µ—Ç–æ–¥ 2 (Device Code)** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π OAuth –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
**–ú–µ—Ç–æ–¥ 3 (Public OAuth)** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## üõ†Ô∏è –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –ö–û–î

### –î–æ–±–∞–≤—å—Ç–µ –≤ main.py:
```python
# –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Calendar ID
from handlers.manager_calendar_simple import (
    simple_calendar_connect, 
    set_calendar_id,
    simple_calendar_faq
)

# Device Code Flow
from services.oauth_public_service import public_oauth_service

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
application.add_handler(CommandHandler("calendar_simple", simple_calendar_connect))
application.add_handler(CommandHandler("setcalendar", set_calendar_id))
application.add_handler(CallbackQueryHandler(simple_calendar_faq, pattern="^simple_calendar_faq$"))
```

### –û–±–Ω–æ–≤–∏—Ç–µ –º–µ–Ω—é –±–æ—Ç–∞:
```python
keyboard = [
    [InlineKeyboardButton("üîó OAuth –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ", callback_data="oauth_calendar")],
    [InlineKeyboardButton("üìÖ –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ", callback_data="simple_calendar")],
    [InlineKeyboardButton("üì± Device Code", callback_data="device_calendar")]
]
```

---

## ‚ùì FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π?**
A: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ - –æ–¥–∏–Ω –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è

**Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å Google Workspace?**
A: –î–∞, –≤—Å–µ –º–µ—Ç–æ–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

**Q: –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å?**
A: –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `/setcalendar` —Å –Ω–æ–≤—ã–º ID

**Q: –ë–æ—Ç –≤–∏–¥–∏—Ç –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?**
A: –¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –¥–∞–ª–∏ –¥–æ—Å—Ç—É–ø

---

## üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª—é–±—ã–º –º–µ—Ç–æ–¥–æ–º —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á –≤ —Å–≤–æ–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
- ‚úÖ Google Meet —Å—Å—ã–ª–∫–∏ –¥–ª—è –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–π  
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –ª–∏—á–Ω—ã–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Å—Ç—Ä–µ—á–∞—Ö

–ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth! üéâ