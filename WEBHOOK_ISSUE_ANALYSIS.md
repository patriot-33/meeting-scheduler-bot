# –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó: –ü—Ä–æ–±–ª–µ–º–∞ —Å Webhook –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º —Å–æ–±—ã—Ç–∏–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è—Ö

## –î–∞—Ç–∞: 2025-08-02 (–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

### üö® –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** WEBHOOK_URL –±—ã–ª –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ `.env` —Ñ–∞–π–ª–µ

### üìä –°–∏–º–ø—Ç–æ–º—ã –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–æ–±—ã—Ç–∏—è –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è—Ö** - –ù–ò –≤ –æ–¥–Ω–æ–º –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º** –≤ Render.com
3. **Telegram webhook –æ—à–∏–±–∫–∞:** "Connection timed out"
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å—Ç—Ä–µ—á** –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### üîç –ü—Ä–æ—Ü–µ—Å—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è (–û–®–ò–ë–û–ß–ù–´–ï):
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å Google Calendar API
- ‚ùå –û—à–∏–±–∫–∏ –≤ OAuth vs Service Account –ª–æ–≥–∏–∫–µ
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å conferenceDataVersion

#### –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- ‚úÖ WEBHOOK_URL –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ `.env` (—Å—Ç—Ä–æ–∫–∞ 11)
- ‚úÖ ENVIRONMENT=development –≤–º–µ—Å—Ç–æ production
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ polling —Ä–µ–∂–∏–º–µ, –Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç Telegram API: polling vs webhook

### üìÅ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### `.env` —Ñ–∞–π–ª (–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```bash
ENVIRONMENT=development          # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è production
# WEBHOOK_URL=https://...        # ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ!
```

#### `.env` —Ñ–∞–π–ª (–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```bash
ENVIRONMENT=production           # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
WEBHOOK_URL=https://meeting-scheduler-bot-fkp8.onrender.com  # ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ
```

### üõ†Ô∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è webhook
```diff
- # WEBHOOK_URL=https://meeting-scheduler-bot-fkp8.onrender.com
+ WEBHOOK_URL=https://meeting-scheduler-bot-fkp8.onrender.com

- ENVIRONMENT=development
+ ENVIRONMENT=production
```

#### 2. –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `google_calendar_dual.py`:
```python
# EMERGENCY LOGGING - Log everything
logger.error(f"üöë EMERGENCY LOG: Starting _create_event_with_fallback")
logger.error(f"üöë Calendar ID: {calendar_id}")
logger.error(f"üöë Calendar Type: {calendar_type}")
```

#### 3. OAuth/Service Account –ª–æ–≥–∏–∫–∞
```python
if is_oauth_calendar:
    # OAuth calendars need user's OAuth credentials, not Service Account
    logger.error(f"üöë OAuth calendar detected - need to use user's OAuth credentials")
    # Fallback to Service Account for now
```

### üìà –õ–æ–≥–∏ –¥–æ –∏ –ø–æ—Å–ª–µ

#### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –ª–æ–≥–∏):
```
2025-08-02 12:41:45 - ERROR - main.py:414 - üîó WEBHOOK ERROR: Connection timed out
```
- –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ webhook –∏ scheduler
- –ù–ï–¢ –ª–æ–≥–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º
- –ù–ï–¢ –ª–æ–≥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π

#### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏):
```
üì• WEBHOOK: ========== NEW REQUEST ==========
üöë EMERGENCY: create_meeting_in_both_calendars CALLED
üöë Manager calendar: woodlocky84@gmail.com
üöë Owner calendar: plantatorbob@gmail.com
```

### üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **OAuth vs Service Account –ø—É—Ç–∞–Ω–∏—Ü–∞**
   - –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ OAuth ‚úÖ
   - –í–ª–∞–¥–µ–ª–µ—Ü –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ OAuth (Service Account) ‚úÖ
   - –°–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞ —Ç–∏–ø –∫–∞–ª–µ–Ω–¥–∞—Ä—è

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ä–µ–¥—ã**
   - –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ vs production deployment
   - `.env` —Ñ–∞–π–ª –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª production —Å—Ä–µ–¥–µ

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏:
1. **Webhook vs Polling –∫–æ–Ω—Ñ–ª–∏–∫—Ç** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è production
2. **Environment variables** –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ä–µ–¥–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è production –æ—Ç–ª–∞–¥–∫–∏

### üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –í Render.com (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
1. –î–æ–±–∞–≤–∏—Ç—å environment variable: `WEBHOOK_URL=https://meeting-scheduler-bot-fkp8.onrender.com`
2. –ò–∑–º–µ–Ω–∏—Ç—å environment variable: `ENVIRONMENT=production`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. ‚úÖ Webhook –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç Telegram
2. ‚úÖ –õ–æ–≥–∏ `üöë EMERGENCY` –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Render.com
3. ‚úÖ –°–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—è—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞
4. ‚úÖ Google Meet —Å—Å—ã–ª–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è

### üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `BUG_FIXING_HISTORY.md` - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- `DIAGNOSTIC_TOOLS_CREATED.md` - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- Git –∫–æ–º–º–∏—Ç—ã —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏:
  - `c2177fe` - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - `f0dc99f` - OAuth/Service Account –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  - `fb9188e` - –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

### ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

**–ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨ .env —Ñ–∞–π–ª –≤ Git!**
- `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ Render.com environment variables
- –õ–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–æ–±–ª–µ–º–∞ **–ù–ï –ë–´–õ–ê** –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π –ª–æ–≥–∏–∫–µ - –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ **–±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ webhook**, —á—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–æ—Ç–æ–º.

–≠—Ç–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (webhook, environment) –ø–µ—Ä–µ–¥ –≥–ª—É–±–æ–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ (–∫–∞–ª–µ–Ω–¥–∞—Ä–∏, OAuth).