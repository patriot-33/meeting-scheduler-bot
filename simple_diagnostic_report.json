{
  "code_issues": [
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "eventHangout",
      "description": "Found eventHangout in src/services/google_calendar_dual.py",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 1
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "_is_oauth_calendar",
      "description": "Found _is_oauth_calendar in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 12
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 13
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "refresh_token",
      "description": "Found refresh_token in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 14
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "manager_event_id",
      "description": "Found manager_event_id in src/services/google_calendar_dual.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 2
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "owner_event_id",
      "description": "Found owner_event_id in src/services/google_calendar_dual.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 3
    },
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "line_estimate": 110,
      "description": "Using deprecated eventHangout instead of hangoutsMeet",
      "suggested_fix": "Change 'eventHangout' to 'hangoutsMeet' in conference type",
      "confidence": 0.95,
      "priority": 4
    },
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar.py",
      "pattern_found": "Invalid conference type value",
      "description": "Found Invalid conference type value in src/services/google_calendar.py",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 5
    },
    {
      "type": "service_account_attendee_error",
      "severity": "high",
      "file": "src/services/google_calendar.py",
      "pattern_found": "Service accounts cannot invite attendees",
      "description": "Found Service accounts cannot invite attendees in src/services/google_calendar.py",
      "suggested_fix": "Remove attendee invitations for Service Account calls",
      "priority": 6
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/google_calendar.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 15
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/meeting_service.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/meeting_service.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 16
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/meeting_service.py",
      "pattern_found": "manager_event_id",
      "description": "Found manager_event_id in src/services/meeting_service.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 7
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/meeting_service.py",
      "pattern_found": "owner_event_id",
      "description": "Found owner_event_id in src/services/meeting_service.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 8
    }
  ],
  "problem_analysis": [
    {
      "type": "conference_type_error",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Invalid conference type value",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 9
    },
    {
      "type": "service_account_attendee_error",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Service accounts cannot invite attendees",
      "suggested_fix": "Remove attendee invitations for Service Account",
      "priority": 10
    },
    {
      "type": "meet_link_failure",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Google Meet ссылки не создаются",
      "suggested_fix": "Fix Google Meet conference creation",
      "priority": 11
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "source": "problem_description",
      "description": "Problem reported: OAuth vs Service Account",
      "suggested_fix": "Improve calendar type detection",
      "priority": 17
    }
  ],
  "prioritized_issues": [
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "eventHangout",
      "description": "Found eventHangout in src/services/google_calendar_dual.py",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 1
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "manager_event_id",
      "description": "Found manager_event_id in src/services/google_calendar_dual.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 2
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "owner_event_id",
      "description": "Found owner_event_id in src/services/google_calendar_dual.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 3
    },
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar_dual.py",
      "line_estimate": 110,
      "description": "Using deprecated eventHangout instead of hangoutsMeet",
      "suggested_fix": "Change 'eventHangout' to 'hangoutsMeet' in conference type",
      "confidence": 0.95,
      "priority": 4
    },
    {
      "type": "conference_type_error",
      "severity": "high",
      "file": "src/services/google_calendar.py",
      "pattern_found": "Invalid conference type value",
      "description": "Found Invalid conference type value in src/services/google_calendar.py",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 5
    },
    {
      "type": "service_account_attendee_error",
      "severity": "high",
      "file": "src/services/google_calendar.py",
      "pattern_found": "Service accounts cannot invite attendees",
      "description": "Found Service accounts cannot invite attendees in src/services/google_calendar.py",
      "suggested_fix": "Remove attendee invitations for Service Account calls",
      "priority": 6
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/meeting_service.py",
      "pattern_found": "manager_event_id",
      "description": "Found manager_event_id in src/services/meeting_service.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 7
    },
    {
      "type": "dual_calendar_sync",
      "severity": "high",
      "file": "src/services/meeting_service.py",
      "pattern_found": "owner_event_id",
      "description": "Found owner_event_id in src/services/meeting_service.py",
      "suggested_fix": "Fix dual calendar synchronization logic",
      "priority": 8
    },
    {
      "type": "conference_type_error",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Invalid conference type value",
      "suggested_fix": "Change eventHangout to hangoutsMeet",
      "priority": 9
    },
    {
      "type": "service_account_attendee_error",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Service accounts cannot invite attendees",
      "suggested_fix": "Remove attendee invitations for Service Account",
      "priority": 10
    },
    {
      "type": "meet_link_failure",
      "severity": "high",
      "source": "problem_description",
      "description": "Problem reported: Google Meet ссылки не создаются",
      "suggested_fix": "Fix Google Meet conference creation",
      "priority": 11
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "_is_oauth_calendar",
      "description": "Found _is_oauth_calendar in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 12
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 13
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar_dual.py",
      "pattern_found": "refresh_token",
      "description": "Found refresh_token in src/services/google_calendar_dual.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 14
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/google_calendar.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/google_calendar.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 15
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "file": "src/services/meeting_service.py",
      "pattern_found": "oauth_credentials",
      "description": "Found oauth_credentials in src/services/meeting_service.py",
      "suggested_fix": "Improve OAuth vs Service Account detection",
      "priority": 16
    },
    {
      "type": "oauth_detection_issue",
      "severity": "medium",
      "source": "problem_description",
      "description": "Problem reported: OAuth vs Service Account",
      "suggested_fix": "Improve calendar type detection",
      "priority": 17
    }
  ],
  "suggested_fixes": {
    "fix_conference_type": {
      "priority": 1,
      "file": "src/services/google_calendar_dual.py",
      "action": "replace_text",
      "search": "'type': 'eventHangout'",
      "replace": "'type': 'hangoutsMeet'",
      "description": "Fix conference type from eventHangout to hangoutsMeet",
      "risk": "low",
      "estimated_time": "5 minutes"
    },
    "fix_service_account_attendees": {
      "priority": 2,
      "file": "src/services/google_calendar_dual.py",
      "action": "conditional_logic",
      "description": "Add condition to skip attendees for Service Account calendars",
      "risk": "medium",
      "estimated_time": "15 minutes"
    },
    "improve_oauth_detection": {
      "priority": 3,
      "file": "src/services/google_calendar_dual.py",
      "action": "enhance_logic",
      "description": "Improve OAuth detection with refresh_token validation",
      "risk": "medium",
      "estimated_time": "20 minutes"
    }
  },
  "action_plan": {
    "total_issues": 17,
    "critical_issues": 0,
    "high_issues": 11,
    "estimated_total_time": "1-2 hours",
    "steps": [
      {
        "step": 1,
        "title": "Fix Conference Type",
        "description": "Fix conference type from eventHangout to hangoutsMeet",
        "action": "Apply conference type fix",
        "files": [
          "src/services/google_calendar_dual.py"
        ],
        "risk": "low",
        "time": "5 minutes"
      },
      {
        "step": 2,
        "title": "Fix Service Account Attendees",
        "description": "Add condition to skip attendees for Service Account calendars",
        "action": "Modify attendee logic for Service Accounts",
        "files": [
          "src/services/google_calendar_dual.py"
        ],
        "risk": "medium",
        "time": "15 minutes"
      },
      {
        "step": 3,
        "title": "Improve OAuth Detection",
        "description": "Improve OAuth detection with refresh_token validation",
        "action": "Enhance OAuth vs Service Account detection",
        "files": [
          "src/services/google_calendar_dual.py"
        ],
        "risk": "medium",
        "time": "20 minutes"
      },
      {
        "step": 4,
        "title": "Test and Deploy",
        "description": "Test changes and deploy to production",
        "action": "Deploy and test calendar functionality",
        "risk": "low",
        "time": "30 minutes"
      }
    ]
  }
}